var VideoSDKMeeting=function(){function e(){}return e.prototype.init=function(e){var t=void 0===e?{}:e,a=t.micEnabled,r=t.webcamEnabled,n=t.name,i=t.meetingId,o=t.redirectOnLeave,l=t.chatEnabled,d=t.screenShareEnabled,s=t.pollEnabled,p=t.whiteBoardEnabled,c=t.participantCanToggleSelfWebcam,u=t.participantCanToggleSelfMic,b=t.raiseHandEnabled,f=t.containerId,g=t.recordingEnabled,m=t.recordingWebhookUrl,h=t.recordingEnabledByDefault,v=t.participantCanToggleRecording,y=t.brandingEnabled,E=t.brandLogoURL,w=t.brandName,S=t.apiKey,C=t.participantCanLeave,j=t.poweredBy,T=t.livestream,k=t.joinScreen,L=t.permissions;try{T||(T={}),L||(L={}),k||(k={});var O=L,P=O.askToJoin,M=O.toggleParticipantWebcam,B=O.toggleParticipantMic;P&&(M=!1,B=!1);var K=T,N=K.visible,U=K.autoStart,W=K.outputs,D=k,I=D.visible,J=D.meetingUrl,x=D.title;if(!S)throw new Error("'apiKey' not provided!");var R=["allow_mod"];P?R.push("ask_join"):R.push("allow_join");var z={apiKey:S};return R.length&&(z.permissions=R),Promise.resolve(fetch("https://api.zujonow.com/v1/prebuilt/token",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(z)})).then(function(e){return Promise.resolve(e.json()).then(function(e){var t=e.token,T="https://api.zujonow.com/v1/prebuilt/meetings/"+i;return Promise.resolve(fetch(T,{method:"POST",headers:{"Content-type":"application/json",Authorization:t},body:JSON.stringify({apiKey:S})})).then(function(e){return Promise.resolve(e.json()).then(function(e){var i=e.meetingId,S=parent.document,T=parent.window;if(void 0===T||void 0===S)throw new Error("No browser detected!");var k=S.createElement("iframe");k.id="videosdk-frame";var L="https://embed.videosdk.live/rtc-js-prebuilt/0.1.4/?micEnabled="+(a?"true":"false")+"&webcamEnabled="+(r?"true":"false")+"&name="+n+"&meetingId="+i+"&redirectOnLeave="+o+"&chatEnabled="+(l?"true":"false")+"&screenShareEnabled="+(d?"true":"false")+"&pollEnabled="+(s?"true":"false")+"&whiteBoardEnabled="+(p?"true":"false")+"&participantCanToggleSelfWebcam="+(c?"true":"false")+"&participantCanToggleSelfMic="+(u?"true":"false")+"&raiseHandEnabled="+(b?"true":"false")+"&token="+t+"&recordingEnabled="+(g?"true":"false")+"&recordingWebhookUrl="+(m||"")+"&recordingEnabledByDefault="+(h?"true":"false")+"&participantCanToggleRecording="+(v?"true":"false")+"&brandingEnabled="+(y?"true":"false")+"&brandLogoURL="+(E||"")+"&brandName="+w+"&participantCanLeave="+("boolean"==typeof C?C?"true":"false":"true")+"&poweredBy="+("boolean"==typeof j?j?"true":"false":"true")+"&liveStreamEnabled="+(N?"true":"false")+"&autoStartLiveStream="+(U?"true":"false")+"&liveStreamOutputs="+JSON.stringify(W||[])+"&participantCanToggleOtherMic="+(B?"true":"false")+"&participantCanToggleOtherWebcam="+(M?"true":"false")+"&askJoin="+(P?"true":"false")+"&joinScreenEnabled="+(I?"true":"false")+"&joinScreenMeetingUrl="+(J||"")+"&joinScreenTitle="+(x||"");k.src=L,k.allowfullscreen=!0,k.width="100%",k.height="100%",k.allow="camera; microphone; fullscreen; display-capture; allow-same-origin; allow-presentation",k.style.border=0;var O=null;if(f){var K=S.getElementById(f);if(!K)throw new Error("No Container found with id "+f);O=K,K.appendChild(k)}else{var D=S.createElement("div");D.style.position="fixed",D.style.left=0,D.style.right=0,D.style.bottom=0,D.style.top=0,D.style.backgroundColor="#212032",O=D,D.appendChild(k),S.body.style.margin="0px",S.body.style.padding="0px",S.body.style.height="100%",S.body.style.overflow="hidden",S.body.appendChild(D)}T.addEventListener("popstate",function(e){O.remove()})})})})})}catch(e){return Promise.reject(e)}},e}();exports.VideoSDKMeeting=VideoSDKMeeting;